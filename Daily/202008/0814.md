---


---

<h1 id="til">TIL</h1>
<h2 id="section">20200814</h2>
<h3 id="moneyboo--오전-">1. Moneyboo ( 오전 )</h3>
<pre class=" language-javascript"><code class="prism  language-javascript"><span class="token comment">// listData를 삭제한다.</span>
<span class="token comment">// 근데 지금 확인해보니 listData 가 빈 배열값으로 남아있다..!!!! 🙉</span>

<span class="token keyword">this</span><span class="token punctuation">.</span><span class="token function">dailyListAddRef</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
   <span class="token punctuation">.</span><span class="token function">doc</span><span class="token punctuation">(</span>yearsMonth<span class="token punctuation">)</span>
   <span class="token punctuation">.</span><span class="token function">update</span><span class="token punctuation">(</span><span class="token punctuation">{</span>
   	listData<span class="token punctuation">:</span> firebase<span class="token punctuation">.</span>firestore<span class="token punctuation">.</span>FieldValue<span class="token punctuation">.</span><span class="token keyword">delete</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">,</span>
   <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre>
<ul>
<li>확인해 보니 빈 배열값으로 남아있길래, 아예 문서를 지워주면 어떨까 싶어서 문서 지우는 법을 찾아보았다.</li>
</ul>
<pre class=" language-javascript"><code class="prism  language-javascript"><span class="token comment">// 문서 삭제</span>
db<span class="token punctuation">.</span><span class="token function">collection</span><span class="token punctuation">(</span><span class="token string">"cities"</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">doc</span><span class="token punctuation">(</span><span class="token string">"DC"</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token keyword">delete</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">then</span><span class="token punctuation">(</span><span class="token keyword">function</span><span class="token punctuation">(</span><span class="token punctuation">)</span>  <span class="token punctuation">{</span> 
console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token string">"Document successfully deleted!"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>  
<span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token keyword">catch</span><span class="token punctuation">(</span><span class="token keyword">function</span><span class="token punctuation">(</span>error<span class="token punctuation">)</span>  <span class="token punctuation">{</span> console<span class="token punctuation">.</span><span class="token function">error</span><span class="token punctuation">(</span><span class="token string">"Error removing document: "</span><span class="token punctuation">,</span> error<span class="token punctuation">)</span><span class="token punctuation">;</span>  
<span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre>
<ul>
<li>
<p>참고 사이트 : <a href="https://cloud.google.com/firestore/docs/manage-data/delete-data">https://cloud.google.com/firestore/docs/manage-data/delete-data</a></p>
</li>
<li>
<p>그대로 내 코드에 적용시켜 봤더니, 에러가 뜨지 않는다!!!</p>
</li>
</ul>

